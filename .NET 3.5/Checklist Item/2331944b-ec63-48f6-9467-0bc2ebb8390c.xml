<?xml version="1.0" encoding="utf-8"?>
<TeamMentor_Article Metadata_Hash="184385818" Content_Hash="-1774220089">
  <Metadata>
    <Id>2331944b-ec63-48f6-9467-0bc2ebb8390c</Id>
    <Library_Id>92718d53-36b2-47bc-b6f5-e60994385f46</Library_Id>
    <Title>信頼されているホストのみがデータベース サーバーへの接続を許可される</Title>
    <Category>データ アクセス</Category>
    <Phase>設計</Phase>
    <Technology>ASP.NET 3.5</Technology>
    <Type>チェックリスト項目</Type>
    <DirectLink />
    <Tag />
    <Security_Demand />
    <Author />
    <Priority>2</Priority>
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>チェック対象</h1>
  <p>データベースサーバへの直接アクセスが防止されているか確認してください｡</p>
  <h1>理由</h1>
  <p>直接アクセスすることで攻撃者はクエリー分析(Isqlw.exe)のようなツールを使用しSQL Server への接続を確立してコマンドを発行できるようになります。 これはデータへの不正アクセスにつながります｡</p>
  <h1>チェック方法</h1>
  <p>これらの手順に従って、不正使用を防止するためにSQL Server へのアクセスを制限してください｡</p>
  <ol>
    <li>
      <p>
        <strong>外部ネットワークからのアクセスが防止できているか確認してください。</strong> SQL Server とポート(初期設定ではTCP 1433 とUDP 1434)がネットワークペリメータ外側から直接アクセスできないような形で、ファイアウォールが構成されているかチェックしてください。 Nmapのようなポートスキャニングツールを使用してこれを確認してください。</p>
      <li>
        <p>
          <strong>ペリメータ内側からのアクセスが制限されているか確認してください｡ </strong>内部ネットワーク内側からであってもSQL Server へのアクセスは、内部ファイアウォールとIPSecを使用して制限しなければなりません。 IPSecはサーバ認証を実現するために使用でき、またミドル階層のアプリケーションサーバのみがSQLデータベースサーバに接続できることを保証するのに役立ちます｡ これにより、内部ネットワークのホストが危険にさらされた場合にSQL Server  を確実に保護することができます。 IPSecは、データベースサーバがインカミング接続を承認するポートを制限するために使用することもできます。 IPSecが適切に実装されたか確認するために、特定のホストとSQL Server 間のすべてのパケットがIPヘッダーの後に認証ヘッダ(AH)およびカプセル化セキュリティペイロード(ESP)を含んでいるか否かを、ネットワークスニッファを使用してチェックしてください｡</p>
        <li>
          <p>
            <strong>SQL Server の露出が最小化されているか確認してください｡</strong> 運用データベース サーバへのアクセスは、運用アプリケーション サーバ、およびログ記録、監視および管理を目的とする最小限の保守システム セットに限定されていることを確認してください。 生産データベースサーバは開発システムにアクセスできないようにし、また開発には別個のデータベースサーバを使用しなければなりません。</p>
        </li>
      </li>
    </li>
  </ol>
  <h1>問題の例</h1>
  <p>金融会社はウェブアプリケーションを使用してエージェントが会社のデータベースと相互処理できるようにしています。 攻撃者を防止するため、会社はデータベースサーバへ攻撃者がアクセスしないよう制限するファイアウォールを使用します。 しかしながら、ファイアウォール内のワークステーションの一つはマルウェアに感染します。 このワークステーションが攻撃者に悪用されて内部ネットワークがスキャンされます。 攻撃者が SQL Server を発見した場合､セキュリティ侵害したワークステーションをプロキシとして利用し、クエリー分析のようなツールを使用してサーバへ接続しコマンドを発行します。</p>
  <h1>その他のリソース</h1>
  <ul>
    <li>
      <a href="http://msdn2.microsoft.com/en-us/library/aa302366.aspx">ポートのフィルタリングおよび認証に IPSec を使用する方法</a>
    </li>
  </ul>
  <h1>関連ガイドライン</h1>
  <ul>
  </ul>
  <hr />
  <p>出典: Microsoft Patterns &amp; Practices ガイダンス</p>]]></Data>
  </Content>
</TeamMentor_Article>