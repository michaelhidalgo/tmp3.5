<?xml version="1.0" encoding="utf-8"?>
<TeamMentor_Article Metadata_Hash="-1999689783" Content_Hash="-570382073">
  <Metadata>
    <Id>9e556cb2-130f-4df7-91dd-dd6fea6afdcf</Id>
    <Library_Id>92718d53-36b2-47bc-b6f5-e60994385f46</Library_Id>
    <Title>機微情報をログ記録したり公開したりしない</Title>
    <Category>エラーと例外の管理</Category>
    <Phase>実装</Phase>
    <Technology>.NET 3.5</Technology>
    <Type>ガイドライン</Type>
    <DirectLink />
    <Tag />
    <Security_Demand />
    <Author />
    <Priority />
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>行うべき事柄</h1>ユーザーパスワードなどの機微なデータや非公開データのログは避けてください。 呼び出し元に情報を開示しすぎないでください。 <h1>理由</h1><p>ログへのアクセスに必要となるアクセス許可は、多くの場合、機微なユーザー データやプライベートのユーザー データへのアクセスに必要となるアクセス許可と異なります。&nbsp; こうしたデータをログ記録することで、意図しない情報漏えいが起きる可能性があります。</p><p>例外詳細には、オペレーティング システムおよび .NET Framework のバージョン番号、メソッド名、コンピュータ名、SQL コマンド文、接続文字列、およびその他の攻撃者に非常に役立つ詳細が含まれる可能性があります。</p><h1>状況</h1><p>ログ記録アーキテクチャの設計、および例外の処理時にこのガイドラインを順守してください。</p><h1>対策</h1><p>以下の手順を実行して機微情報の公開を回避してください。</p><ol><li>設計段階で、システムが扱うすべての機微なユーザーデータの一覧を作成します。&nbsp; 共に使用することで個人を特定するマルチパート登録 Credential 情報またはフィールドなどといった、組合せが重要な、複合データエレメントを含めます。&nbsp; 機微データは様々な書式であることがあります。&nbsp; 顧客名、政府発行ID番号、クレジット カードまたはその他金融機関情報、パスワード、私有鍵はすべて機微な情報の例です。&nbsp; ヘルス ケアや銀行など一部の業界では、機密情報を定義する規制基準を設けています。&nbsp; アプリケーションに規制要件が適用される場合、規制要件に従って機微データを識別します。&nbsp; 一般的に機微データは次のように定義されます。<ol><li>他のユーザーと共有すべきではない、Personally Identifiable Information、またはPersonally Identifiable Informationを取得するために使用できる情報。 <li>ユーザーが提供する情報で、アプリケーションの他のユーザーと共有することが望まれないもの。 <li>外部の信頼できる情報源から得られた情報で、ユーザーと共有することは意図されていないもの。 </li></li></li></ol><li>機微データがログ記録されないことを確認します。 アプリケーションのロギング アーキテクチャを設計する時、機微データを扱うコンポーネントに特に注意を払います。&nbsp; これらコンポーネントが機微データを収集しないようにログ システムを設計します。&nbsp; システム内のトランザクションを記録する時、必要最小限の情報だけをログ記録します。&nbsp; 顧客からの新しい注文をログ記録する場合、時間、顧客ID、注文IDだけをログ記録します。&nbsp; 顧客氏名、注文商品、支払情報はトランザクション記録から再構築できるため、ログ システムから外しておくことが可能です。 <li>例外詳細がアプリケーションの境界を超えてクライアントに伝播できないようになっていることを確認してください。 <b>例外</b>に含まれる細かな例外情報は、開発者や攻撃者などに依存します。 <li>問題の診断に役立てるために、詳細をイベント ログに書き込むことで詳細をログ記録し、ユーザーには一般的なエラー メッセージを返します。</li></li></li></li></ol><h1>関連する項目</h1><ul><li><div>チェックリスト項目：システム情報または機微なアプリケーション情報が公開されていない</div><li><div>チェックリスト項目：&nbsp;機微データがイベント ログ記録されていない</div></li></li></ul><hr /><p>出典: Microsoft patterns & practices guidance</p>]]></Data>
  </Content>
</TeamMentor_Article>